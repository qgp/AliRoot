
Int_t events;

RICHmenu(Int_t nev=1)
{ 

  // static Int_t events;

  //printf("Called for %d events.",events);
  
  //gAlice=0;
  //char *confi="Config.C";
  //Int_t events=10;

  events=nev;

  char *str="\"Number of events %d\"";
  
   TControlBar *menu = new TControlBar("vertical","RICH menu");
   //menu->AddButton("      Help for RICH      ","gSystem->Exec(\"less RICHHelp.txt\");", "Explains how to use RICH menus");
   menu->AddButton("      Help for RICH      ","RICHHelp()", "Explains how to use RICH menus");
   menu->AddButton("Configure",            "gSystem->Exec(\"rconfig\"); gSystem->Exit(0);","Interactive Configuration");
   menu->AddButton("Run",               "gAlice->Run(events)","Process an Alice event - WARNING: Overwrites previous data file!");
   menu->AddButton("Run Lego",          ".x RICHRunLego.C","Special runs to generate the radl/absl lego plots");
   menu->AddButton("Digitise Event",             ".x RICHdigit.C(events, 0)","Digitise event");
   menu->AddButton(" Merge and Digitise Event ",             ".x RICHdigit.C(events,1)","Merge with background file and digitise");
   menu->AddButton("Clusterize Event",      ".x RICHrawclusters.C(0,events-1)","Reconstruct clusters");
   menu->AddButton("Reconstruct Event",       ".x RICHreco.C(events)","Reconstruction algortihms");
   menu->AddButton("Diagnostics",       ".x RICHDiagnostics.C(events)","Miscellaneous diagnostics");
   menu->AddButton("Display",           ".x RICHdisplay.C","Display run");
   menu->AddButton("Geometry Browser",           "Gui()","Browse the GEANT geometry - WARNING: Overwrites previous data file!");
   menu->AddButton("File Browser",           "TBrowser new;","Browse data files");
   menu->AddButton("Draw RICH Detector",              "Draw()","Draw the GEANT defined modules");
   menu->AddButton("Quit AliRoot",             ".q","Close session");
//   menu->AddButton("Reset",             "RICHReset()","Close and Restart AliRoot");
   
   //gROOT->SaveContext();

   //gAlice->Init(config);
   //((TGeant3*)gMC)->InitHIGZ();

   menu->Show();
}

void RICHHelp()
{
   gSystem->Exec("emacs RICHHelp.txt &");
}

void RICHInit(Int_t events)
{
  gAlice->Init("Config.C");
  ((TGeant3*)gMC)->InitHIGZ();
  gAlice->Run(events);
}

void Gui()
{
  gAlice->Init("Config.C");
  ((TGeant3*)gMC)->InitHIGZ();
  gROOT->ProcessLine(".x TGeant3GUI.C");
}

void Draw()
{
  gAlice->Init("Config.C");
  ((TGeant3*)gMC)->InitHIGZ();
  gROOT->ProcessLine(".x DrawRICH.C");
}

void RICHReset()
{
//   gSystem->Exec("aliroot mrich.C &");

  gSystem->Exec("xterm +ls -e aliroot mrich.C &");
   gSystem->Exit(0);
}


